<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–≤–∏–∑ –æ –°–µ—Ä–≥–∏–∏ –†–∞–¥–æ–Ω–µ–∂—Å–∫–æ–º</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º html2canvas –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: #2b1b0e;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Cormorant Garamond', 'Times New Roman', serif;
            padding: 20px;
            margin: 0;
            background-image: radial-gradient(circle at 10% 30%, #3d2a1a 0%, #1f140c 100%);
        }

        .quiz-container {
            width: 100%;
            max-width: 900px;
            background: #f7f0d9;
            background-image: 
                linear-gradient(145deg, rgba(200, 170, 120, 0.2) 0%, transparent 30%),
                repeating-linear-gradient(45deg, rgba(120, 70, 30, 0.03) 0px, rgba(120, 70, 30, 0.03) 2px, transparent 2px, transparent 6px);
            border: 12px solid #b48b5a;
            border-image: repeating-linear-gradient(45deg, #b48b5a, #e3c184, #b48b5a) 30 stretch;
            box-shadow: 0 20px 30px rgba(0,0,0,0.5), inset 0 0 30px rgba(255,215,140,0.3);
            padding: 30px 25px;
            position: relative;
            border-radius: 0 0 30px 30px;
        }

        .quiz-container::before {
            content: "";
            position: absolute;
            top: -18px;
            left: 20px;
            right: 20px;
            height: 30px;
            background: linear-gradient(135deg, #e9d5a0, #cbaa7a);
            border-radius: 30px 30px 0 0;
            box-shadow: inset 0 5px 8px #8b6b42;
            border-bottom: 2px solid #a57c4a;
        }

        .quiz-container::after {
            content: "‚ò¶";
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 60px;
            color: #e9c686;
            text-shadow: 2px 4px 4px #3f2e1b;
            opacity: 0.8;
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
            color: #3f2b16;
            margin-bottom: 15px;
            text-shadow: 2px 2px 0px #e3c184, 4px 4px 0px rgba(0,0,0,0.1);
            letter-spacing: 2px;
            font-family: 'Cormorant Unicase', 'Cormorant Garamond', serif;
            border-bottom: 3px double #ab7e4a;
            padding-bottom: 20px;
        }

        .subtitle {
            text-align: center;
            font-style: italic;
            color: #5a3e24;
            font-size: 1.2rem;
            margin-bottom: 30px;
            background: rgba(222, 184, 135, 0.3);
            padding: 8px 20px;
            border-radius: 50px;
            display: inline-block;
            margin-left: auto;
            margin-right: auto;
            width: fit-content;
            border: 1px solid #b6935c;
        }

        /* –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏ */
        .name-screen {
            text-align: center;
            padding: 40px 20px;
        }
        .name-screen h2 {
            font-size: 2rem;
            color: #3f2b16;
            margin-bottom: 20px;
        }
        .name-screen input {
            font-size: 1.5rem;
            padding: 15px 25px;
            width: 80%;
            max-width: 400px;
            border: 3px solid #b48b5a;
            background: #fef7e9;
            border-radius: 60px;
            font-family: 'Cormorant Garamond', serif;
            margin-bottom: 30px;
            outline: none;
        }
        .name-screen input:focus {
            border-color: #e3a35c;
            box-shadow: 0 0 0 3px #eec68a;
        }
        .btn-start {
            background: linear-gradient(145deg, #a87e4a, #6f4f2b);
            border: 2px solid #eac784;
            color: #fff4dc;
            font-size: 2rem;
            font-weight: bold;
            padding: 18px 50px;
            border-radius: 100px;
            cursor: pointer;
            box-shadow: 0 9px 0 #3f2f1b, 0 6px 12px black;
            font-family: 'Cormorant Unicase', serif;
            transition: 0.1s;
        }
        .btn-start:hover {
            background: linear-gradient(145deg, #b48f5a, #8a623a);
            transform: translateY(-2px);
            box-shadow: 0 11px 0 #3f2f1b, 0 8px 16px black;
        }
        .btn-start:active {
            transform: translateY(5px);
            box-shadow: 0 4px 0 #3f2f1b, 0 6px 12px black;
        }
        .btn-start:disabled {
            opacity: 0.6;
            transform: translateY(0);
            box-shadow: 0 6px 0 #3f2f1b, 0 4px 8px black;
            cursor: not-allowed;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 1.3rem;
            background: #e9d9b4;
            padding: 12px 25px;
            border-radius: 60px;
            border: 2px solid #b07d48;
            color: #2f1f10;
            font-weight: 600;
        }
        .stats span {
            background: #b58d56;
            padding: 5px 15px;
            border-radius: 40px;
            color: #251e10;
        }

        .progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            font-size: 1.3rem;
            background: #e9d9b4;
            padding: 10px 20px;
            border-radius: 60px;
            border: 2px solid #b07d48;
            color: #2f1f10;
            font-weight: 600;
        }

        .progress-bar {
            height: 10px;
            background: #dbb27b;
            border-radius: 10px;
            flex-grow: 1;
            margin: 0 15px;
            border: 1px solid #8a6136;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #b8863d, #efcd91);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .question-box {
            background: rgba(255, 250, 230, 0.7);
            border: 3px solid #bc8f4b;
            padding: 25px 20px;
            margin-bottom: 25px;
            box-shadow: inset 0 0 20px #e5cfaa, 0 8px 12px rgba(70, 40, 10, 0.3);
            border-radius: 20px 0 20px 0;
            position: relative;
        }

        .question-box::before {
            content: "‚ù¶";
            position: absolute;
            bottom: -15px;
            right: 10px;
            font-size: 30px;
            color: #a67942;
            opacity: 0.4;
            transform: rotate(15deg);
        }

        .question-text {
            font-size: 1.8rem;
            font-weight: 600;
            color: #2a1c0c;
            margin-bottom: 20px;
            line-height: 1.3;
            padding-left: 15px;
            border-left: 6px solid #b68232;
        }

        .answers {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .answer-item {
            background: #f2e5cc;
            border: 2px solid #aa7c4a;
            border-radius: 50px;
            padding: 15px 25px;
            font-size: 1.4rem;
            color: #1e140c;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 2px 4px 6px #5d421e;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .answer-item:hover {
            background: #e9d7b5;
            border-color: #e3a35c;
            transform: scale(1.02);
            box-shadow: 4px 6px 10px #4d371b;
        }

        .answer-item.selected {
            background: #cbb786;
            border-color: #dAA520;
            box-shadow: 0 0 0 3px #eebc6e;
            color: #1e1b13;
            font-weight: 600;
        }

        input[type="radio"] {
            appearance: none;
            width: 26px;
            height: 26px;
            border: 2px solid #7a572f;
            border-radius: 50%;
            outline: none;
            background: #faf0d7;
            cursor: pointer;
            transition: 0.1s;
            position: relative;
        }

        input[type="radio"]:checked {
            background: #b27d40;
            border-color: #eeb13a;
            box-shadow: 0 0 0 2px #ffd68a;
        }

        input[type="radio"]:checked::after {
            content: "‚úô";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ffe49e;
            font-size: 18px;
            line-height: 1;
        }

        .btn-next {
            background: linear-gradient(145deg, #a87e4a, #6f4f2b);
            border: 2px solid #eac784;
            color: #fff4dc;
            font-size: 1.8rem;
            font-weight: bold;
            padding: 18px 40px;
            border-radius: 100px;
            cursor: pointer;
            width: 100%;
            transition: 0.2s;
            margin-top: 20px;
            text-transform: uppercase;
            letter-spacing: 3px;
            box-shadow: 0 9px 0 #3f2f1b, 0 6px 12px black;
            font-family: 'Cormorant Unicase', serif;
        }

        .btn-next:hover {
            background: linear-gradient(145deg, #b48f5a, #8a623a);
            border-color: #ffdfa0;
            transform: translateY(-2px);
            box-shadow: 0 11px 0 #3f2f1b, 0 8px 16px black;
        }

        .btn-next:active {
            transform: translateY(5px);
            box-shadow: 0 4px 0 #3f2f1b, 0 6px 12px black;
        }

        .result-box {
            text-align: center;
            background: #f5e7cd;
            border: 4px double #b4844a;
            padding: 35px 25px;
            font-size: 1.8rem;
            color: #2f1d0d;
            border-radius: 20px;
        }

        .result-box p {
            margin: 15px 0;
        }

        .blessing {
            font-size: 1.7rem;
            background: #efe2c6;
            padding: 25px;
            border-left: 12px solid #b68b54;
            font-style: italic;
            color: #2c1b0b;
            margin: 30px 0 20px;
            border-radius: 0 30px 30px 0;
            box-shadow: inset 0 0 30px #f7e6c8;
            line-height: 1.5;
        }

        .restart-btn, .screenshot-btn, .answers-btn {
            background: #b58d56;
            border: 3px solid #eacc94;
            color: #231707;
            font-size: 1.6rem;
            padding: 15px 30px;
            border-radius: 60px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px;
            transition: 0.2s;
            box-shadow: 0 5px 0 #604d2e;
        }

        .restart-btn:hover, .screenshot-btn:hover, .answers-btn:hover {
            background: #cfaa73;
        }

        .score {
            font-size: 3rem;
            color: #9e691f;
            text-shadow: 2px 2px 0 #ffd58c;
        }

        .question-image {
            max-width: 100%;
            max-height: 200px;
            border: 3px solid #aa7c4a;
            border-radius: 20px;
            margin: 15px auto;
            display: block;
        }

        .image-placeholder {
            width: 100%;
            height: 150px;
            background: #d9c8a8;
            border: 2px dashed #a67942;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #7a572f;
            margin: 15px auto;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ */
        .answers-review {
            margin-top: 30px;
            border-top: 3px double #b4844a;
            padding-top: 25px;
        }
        .answer-card {
            background: #efe2c6;
            border: 2px solid #b68b54;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: left;
        }
        .answer-card .question-text {
            font-size: 1.6rem;
            margin-bottom: 10px;
        }
        .options {
            font-size: 1.4rem;
            margin: 10px 0;
        }
        .correct-answer {
            color: #1f6d1f;
            font-weight: bold;
            background: #dff0d8;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 30px;
            margin-top: 8px;
        }
        details {
            margin-top: 15px;
            font-size: 1.4rem;
        }
        summary {
            cursor: pointer;
            color: #7a4f1a;
            font-weight: 600;
            list-style: none;
            display: inline-block;
            border-bottom: 2px dashed #a67942;
            padding-bottom: 3px;
        }
        summary::-webkit-details-marker {
            display: none;
        }
        summary::before {
            content: "‚úô ";
            font-size: 1.8rem;
            color: #b68232;
        }
        details[open] summary::before {
            content: "‚úô ";
        }
        .explanation {
            background: #faf0dd;
            padding: 15px;
            border-radius: 15px;
            margin-top: 15px;
            border-left: 8px solid #b68b54;
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .question-text { font-size: 1.4rem; }
            .answer-item { font-size: 1.1rem; padding: 12px 15px; }
            .btn-next { font-size: 1.4rem; }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Cormorant+Unicase:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="quiz-container" id="quizContainer">
        <div id="content"></div>
    </div>

    <script>
        (function() {
            // –í–æ–ø—Ä–æ—Å—ã —Å —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
            const questions = [
                { q: "–ö–∞–∫–æ–µ –∏–º—è –ø–æ–ª—É—á–∏–ª –ø—Ä–µ–ø–æ–¥–æ–±–Ω—ã–π –°–µ—Ä–≥–∏–π –ø—Ä–∏ –∫—Ä–µ—â–µ–Ω–∏–∏?", opts: ["–í–∞—Ä—Ñ–æ–ª–æ–º–µ–π", "–°–µ—Ä–≥–∏–π", "–ò–æ–∞–Ω–Ω", "–ü–µ—Ç—Ä"], correct: 0, expl: "–ü—Ä–∏ –∫—Ä–µ—â–µ–Ω–∏–∏ –µ–º—É –¥–∞–ª–∏ –∏–º—è –í–∞—Ä—Ñ–æ–ª–æ–º–µ–π, —á—Ç–æ –∑–Ω–∞—á–∏—Ç ¬´—Å—ã–Ω —É—Ç–µ—à–µ–Ω–∏—è¬ª. –ò–º—è –°–µ—Ä–≥–∏–π –æ–Ω –ø–æ–ª—É—á–∏–ª –ø—Ä–∏ –ø–æ—Å—Ç—Ä–∏–≥–µ." },
                { q: "–ö–∞–∫ –∑–≤–∞–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –°–µ—Ä–≥–∏—è –†–∞–¥–æ–Ω–µ–∂—Å–∫–æ–≥–æ?", opts: ["–ö–∏—Ä–∏–ª–ª –∏ –ú–∞—Ä–∏—è", "–ò–æ–∞–∫–∏–º –∏ –ê–Ω–Ω–∞", "–ó–∞—Ö–∞—Ä–∏—è –∏ –ï–ª–∏—Å–∞–≤–µ—Ç–∞", "–ü—ë—Ç—Ä –∏ –§–µ–≤—Ä–æ–Ω–∏—è"], correct: 0, expl: "–†–æ–¥–∏—Ç–µ–ª–∏ ‚Äî –±–æ—è—Ä–µ –ö–∏—Ä–∏–ª–ª –∏ –ú–∞—Ä–∏—è. –û–Ω–∏ –±—ã–ª–∏ –≥–ª—É–±–æ–∫–æ –≤–µ—Ä—É—é—â–∏–º–∏, –ø–æ–¥ –∫–æ–Ω–µ—Ü –∂–∏–∑–Ω–∏ –ø—Ä–∏–Ω—è–ª–∏ –º–æ–Ω–∞—à–µ—Å—Ç–≤–æ." },
                { q: "–ö–∞–∫–æ–µ —á—É–¥–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å –±—É–¥—É—â–∏–º —Å–≤—è—Ç—ã–º, –∫–æ–≥–¥–∞ –æ–Ω –±—ã–ª –µ—â—ë –≤ —É—Ç—Ä–æ–±–µ –º–∞—Ç–µ—Ä–∏?", opts: ["–¢—Ä–∏–∂–¥—ã –ø—Ä–æ–∫—Ä–∏—á–∞–ª –≤–æ –≤—Ä–µ–º—è –ª–∏—Ç—É—Ä–≥–∏–∏", "–Ø–≤–∏–ª—Å—è –≤–æ —Å–Ω–µ –º–∞—Ç–µ—Ä–∏", "–ò—Å—Ü–µ–ª–∏–ª –±–æ–ª—å–Ω–æ–≥–æ", "–ë–ª–∞–≥–æ—Å–ª–æ–≤–∏–ª –Ω–∞—Ä–æ–¥ –∏–∑ —á—Ä–µ–≤–∞"], correct: 0, expl: "–ö–æ–≥–¥–∞ –ú–∞—Ä–∏—è –±—ã–ª–∞ –≤ —Ö—Ä–∞–º–µ, –º–ª–∞–¥–µ–Ω–µ—Ü —Ç—Ä–∏–∂–¥—ã –ø—Ä–æ–∫—Ä–∏—á–∞–ª –≤–æ –≤—Ä–µ–º—è –ª–∏—Ç—É—Ä–≥–∏–∏, –ø—Ä–µ–¥–≤–µ—â–∞—è –µ–≥–æ –±—É–¥—É—â–µ–µ —Å–ª—É–∂–µ–Ω–∏–µ." },
                { q: "–ü–æ—á–µ–º—É –º–∞–ª–µ–Ω—å–∫–æ–º—É –í–∞—Ä—Ñ–æ–ª–æ–º–µ—é –±—ã–ª–æ —Ç—Ä—É–¥–Ω–æ —É—á–∏—Ç—å—Å—è –≥—Ä–∞–º–æ—Ç–µ?", opts: ["–ù–µ –º–æ–≥ –æ—Å–≤–æ–∏—Ç—å —á—Ç–µ–Ω–∏–µ", "–ë—ã–ª –ª–µ–Ω–∏–≤", "–ù–µ –±—ã–ª–æ —É—á–∏—Ç–µ–ª–µ–π", "–†–æ–¥–∏—Ç–µ–ª–∏ –Ω–µ —É—á–∏–ª–∏"], correct: 0, expl: "–ì—Ä–∞–º–æ—Ç–∞ –µ–º—É –Ω–µ –¥–∞–≤–∞–ª–∞—Å—å, –æ–Ω –æ—á–µ–Ω—å –ø–µ—Ä–µ–∂–∏–≤–∞–ª, –Ω–æ –ø–æ—Å–ª–µ –≤—Å—Ç—Ä–µ—á–∏ —Å–æ —Å—Ç–∞—Ä—Ü–µ–º —á—É–¥–µ—Å–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å—Ç–∞–ª —á–∏—Ç–∞—Ç—å." },
                { q: "–ß—Ç–æ —Å—Ç–∞—Ä–µ—Ü –¥–∞–ª –æ—Ç—Ä–æ–∫—É –í–∞—Ä—Ñ–æ–ª–æ–º–µ—é –ø–æ—Å–ª–µ –º–æ–ª–∏—Ç–≤—ã?", opts: ["–ß–∞—Å—Ç—å –ø—Ä–æ—Å—Ñ–æ—Ä—ã", "–ö—É—Å–æ—á–µ–∫ —Ö–ª–µ–±–∞", "–°–≤—è—Ç—É—é –∫–Ω–∏–≥—É", "–ö—Ä–µ—Å—Ç"], correct: 0, expl: "–°—Ç–∞—Ä–µ—Ü –¥–∞–ª –µ–º—É —á–∞—Å—Ç—å –ø—Ä–æ—Å—Ñ–æ—Ä—ã –∫–∞–∫ –∑–Ω–∞–∫ –±–ª–∞–≥–æ–¥–∞—Ç–∏ –∏ —Ä–∞–∑—É–º–µ–Ω–∏—è –°–≤—è—â–µ–Ω–Ω–æ–≥–æ –ü–∏—Å–∞–Ω–∏—è." },
                { q: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª—Å—è —Ö–æ–ª–º, –≥–¥–µ –°–µ—Ä–≥–∏–π –≤–º–µ—Å—Ç–µ —Å –±—Ä–∞—Ç–æ–º –ø–æ—Å—Ç—Ä–æ–∏–ª –ø–µ—Ä–≤—É—é —Ü–µ—Ä–∫–æ–≤—å?", opts: ["–ú–∞–∫–æ–≤–µ—Ü", "–°–∏–æ–Ω", "–ì–æ–ª–≥–æ—Ñ–∞", "–ï–ª–µ–æ–Ω"], correct: 0, expl: "–•–æ–ª–º –Ω–∞–∑—ã–≤–∞–ª—Å—è –ú–∞–∫–æ–≤–µ—Ü (–∏–ª–∏ –ú–∞–∫–æ–≤—Å–∫–∞—è –≥–æ—Ä–∞), —Ç–∞–º –±—ã–ª–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ —Ü–µ—Ä–∫–æ–≤—å –≤–æ –∏–º—è –°–≤—è—Ç–æ–π –¢—Ä–æ–∏—Ü—ã." },
                { q: "–ö–∞–∫–æ–π –∑–≤–µ—Ä—å –ø—Ä–∏—Ö–æ–¥–∏–ª –∫ –ø—Ä–µ–ø–æ–¥–æ–±–Ω–æ–º—É –°–µ—Ä–≥–∏—é –∏ –¥–µ–ª–∏–ª —Å –Ω–∏–º —Ö–ª–µ–±?", opts: ["–ú–µ–¥–≤–µ–¥—å", "–í–æ–ª–∫", "–õ–∏—Å–∞", "–ó–∞—è—Ü"], correct: 0, expl: "–ú–µ–¥–≤–µ–¥—å –ø—Ä–∏—Ö–æ–¥–∏–ª –∫ —Å–≤—è—Ç–æ–º—É, –∏ –°–µ—Ä–≥–∏–π –¥–µ–ª–∏–ª—Å—è —Å –Ω–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–º –∫—É—Å–∫–æ–º —Ö–ª–µ–±–∞." },
                { q: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–π –º–æ–Ω–∞—Å—Ç—ã—Ä—å, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –°–µ—Ä–≥–∏–µ–º –†–∞–¥–æ–Ω–µ–∂—Å–∫–∏–º?", opts: ["–¢—Ä–æ–∏—Ü–µ-–°–µ—Ä–≥–∏–µ–≤–∞ –ª–∞–≤—Ä–∞", "–ö–∏–µ–≤–æ-–ü–µ—á–µ—Ä—Å–∫–∞—è –ª–∞–≤—Ä–∞", "–°–æ–ª–æ–≤–µ—Ü–∫–∏–π –º–æ–Ω–∞—Å—Ç—ã—Ä—å", "–û–ø—Ç–∏–Ω–∞ –ø—É—Å—Ç—ã–Ω—å"], correct: 0, expl: "–¢—Ä–æ–∏—Ü–µ-–°–µ—Ä–≥–∏–µ–≤–∞ –ª–∞–≤—Ä–∞ –≤ –°–µ—Ä–≥–∏–µ–≤–æ–º –ü–æ—Å–∞–¥–µ ‚Äî –æ–¥–∏–Ω –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –¥—É—Ö–æ–≤–Ω—ã—Ö —Ü–µ–Ω—Ç—Ä–æ–≤ –†–æ—Å—Å–∏–∏." },
                { q: "–ß—Ç–æ –∑–∞–ø—Ä–µ—â–∞–ª–æ—Å—å –º–æ–Ω–∞—Ö–∞–º –ø–æ —É—Å—Ç–∞–≤—É, –≤–≤–µ–¥—ë–Ω–Ω–æ–º—É –°–µ—Ä–≥–∏–µ–º?", opts: ["–°–æ–±–∏—Ä–∞—Ç—å –ø–æ–¥–∞—è–Ω–∏–µ", "–ï—Å—Ç—å –º—è—Å–æ", "–°–ø–∞—Ç—å –±–æ–ª–µ–µ 4 —á–∞—Å–æ–≤", "–†–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å –ø–æ—Å–ª–µ –≤–µ—á–µ—Ä–Ω–∏"], correct: 0, expl: "–°–µ—Ä–≥–∏–π –≤–≤—ë–ª –æ–±—â–µ–∂–∏—Ç–µ–ª—å–Ω—ã–π —É—Å—Ç–∞–≤: –º–æ–Ω–∞—Ö–∏ –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –∂–∏—Ç—å —Å–≤–æ–∏–º —Ç—Ä—É–¥–æ–º, –∞ –Ω–µ –ø—Ä–æ—Å–∏—Ç—å –º–∏–ª–æ—Å—Ç—ã–Ω—é." },
                { q: "–û—Ç –∫–∞–∫–æ–π –≤—ã—Å–æ–∫–æ–π —Ü–µ—Ä–∫–æ–≤–Ω–æ–π –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –°–µ—Ä–≥–∏–π –æ—Ç–∫–∞–∑–∞–ª—Å—è, —Å–∫–∞–∑–∞–≤: ¬´–≤—ã—à–µ –º–æ–µ—è –º–µ—Ä—ã¬ª?", opts: ["–û—Ç —Å–∞–Ω–∞ –º–∏—Ç—Ä–æ–ø–æ–ª–∏—Ç–∞", "–û—Ç –ø–∞—Ç—Ä–∏–∞—Ä—à–µ—Å—Ç–≤–∞", "–û—Ç –∏–≥—É–º–µ–Ω—Å—Ç–≤–∞", "–û—Ç –µ–ø–∏—Å–∫–æ–ø—Å—Ç–≤–∞"], correct: 0, expl: "–ú–∏—Ç—Ä–æ–ø–æ–ª–∏—Ç –ê–ª–µ–∫—Å–µ–π –ø—Ä–µ–¥–ª–∞–≥–∞–ª –°–µ—Ä–≥–∏—é —Å—Ç–∞—Ç—å –µ–≥–æ –ø—Ä–µ–µ–º–Ω–∏–∫–æ–º, –Ω–æ —Å–≤—è—Ç–æ–π –æ—Ç–∫–∞–∑–∞–ª—Å—è –ø–æ —Å–º–∏—Ä–µ–Ω–∏—é." },
                { q: "–ù–∞ –∫–∞–∫—É—é –±–∏—Ç–≤—É –ø—Ä–µ–ø–æ–¥–æ–±–Ω—ã–π –°–µ—Ä–≥–∏–π –±–ª–∞–≥–æ—Å–ª–æ–≤–∏–ª –∫–Ω—è–∑—è –î–º–∏—Ç—Ä–∏—è –î–æ–Ω—Å–∫–æ–≥–æ?", opts: ["–ö—É–ª–∏–∫–æ–≤—Å–∫–∞—è –±–∏—Ç–≤–∞", "–õ–µ–¥–æ–≤–æ–µ –ø–æ–±–æ–∏—â–µ", "–ù–µ–≤—Å–∫–∞—è –±–∏—Ç–≤–∞", "–ë–æ—Ä–æ–¥–∏–Ω—Å–∫–∞—è –±–∏—Ç–≤–∞"], correct: 0, expl: "–°–µ—Ä–≥–∏–π –±–ª–∞–≥–æ—Å–ª–æ–≤–∏–ª –∫–Ω—è–∑—è –î–º–∏—Ç—Ä–∏—è –Ω–∞ –ö—É–ª–∏–∫–æ–≤—Å–∫—É—é –±–∏—Ç–≤—É –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–ª –ø–æ–±–µ–¥—É." },
                { q: "–ö–∞–∫ –∑–≤–∞–ª–∏ –¥–≤—É—Ö –º–æ–Ω–∞—Ö–æ–≤-–±–æ–≥–∞—Ç—ã—Ä–µ–π, –∫–æ—Ç–æ—Ä—ã—Ö –°–µ—Ä–≥–∏–π –æ—Ç–ø—Ä–∞–≤–∏–ª —Å –≤–æ–π—Å–∫–æ–º?", opts: ["–ü–µ—Ä–µ—Å–≤–µ—Ç –∏ –û—Å–ª—è–±—è", "–ò–ª—å—è –ú—É—Ä–æ–º–µ—Ü –∏ –î–æ–±—Ä—ã–Ω—è", "–ë–æ—Ä–∏—Å –∏ –ì–ª–µ–±", "–ü—ë—Ç—Ä –∏ –§–µ–≤—Ä–æ–Ω–∏—è"], correct: 0, expl: "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ä–µ—Å–≤–µ—Ç –∏ –ê–Ω–¥—Ä–µ–π –û—Å–ª—è–±—è ‚Äî –∏–Ω–æ–∫–∏ –¢—Ä–æ–∏—Ü–∫–æ–≥–æ –º–æ–Ω–∞—Å—Ç—ã—Ä—è, —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ö—É–ª–∏–∫–æ–≤—Å–∫–æ–π –±–∏—Ç–≤—ã." },
                { q: "–ü–æ—á–µ–º—É –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–æ–Ω–∞—Ö–æ–≤ –Ω–∞ –≤–æ–π–Ω—É –±—ã–ª–∞ –Ω–µ–æ–±—ã—á–Ω—ã–º –ø–æ—Å—Ç—É–ø–∫–æ–º –¥–ª—è —Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏?", opts: ["–¶–µ—Ä–∫–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞–ø—Ä–µ—â–∞–ª–∏ –º–æ–Ω–∞—Ö–∞–º –≤–æ–µ–≤–∞—Ç—å", "–ú–æ–Ω–∞—Ö–∏ –±—ã–ª–∏ —Å—Ç–∞—Ä—ã", "–ú–æ–Ω–∞—Ö–∏ –Ω–µ —É–º–µ–ª–∏ –≤–æ–µ–≤–∞—Ç—å", "–û–Ω–∏ –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å –∏–¥—Ç–∏"], correct: 0, expl: "–ü–æ –∫–∞–Ω–æ–Ω–∞–º –º–æ–Ω–∞—Ö–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—Ä–∞—Ç—å –≤ —Ä—É–∫–∏ –æ—Ä—É–∂–∏–µ, –Ω–æ —Ä–∞–¥–∏ –∑–∞—â–∏—Ç—ã –û—Ç–µ—á–µ—Å—Ç–≤–∞ –°–µ—Ä–≥–∏–π –≤–∑—è–ª —ç—Ç–æ—Ç –≥—Ä–µ—Ö –Ω–∞ —Å–µ–±—è." },
                { q: "–í –∫–∞–∫–æ–º –≥–æ–¥—É –±—ã–ª –æ—Å–≤—è—â—ë–Ω —Ö—Ä–∞–º –ø—Ä–µ–ø–æ–¥–æ–±–Ω–æ–≥–æ –°–µ—Ä–≥–∏—è –†–∞–¥–æ–Ω–µ–∂—Å–∫–æ–≥–æ –≤ –¢—É–ª–µ?", opts: ["1898", "1888", "1900", "1917"], correct: 0, expl: "–•—Ä–∞–º –≤ —á–µ—Å—Ç—å –°–µ—Ä–≥–∏—è –†–∞–¥–æ–Ω–µ–∂—Å–∫–æ–≥–æ –≤ –¢—É–ª–µ (–ó–∞—Ä–µ—á—å–µ) –æ—Å–≤—è—â—ë–Ω –≤ 1898 –≥–æ–¥—É. –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º –±—ã–ª –∞—Ä—Ö–∏–µ–ø–∏—Å–∫–æ–ø –°–µ—Ä–≥–∏–π (–õ—è–ø–∏–¥–µ–≤—Å–∫–∏–π)." },
                { q: "–ö–∞–∫–∞—è —Å–≤—è—Ç—ã–Ω—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç—É–ª—å—Å–∫–æ–º –°–µ—Ä–≥–∏–µ–≤—Å–∫–æ–º —Ö—Ä–∞–º–µ?", opts: ["–û–±—Ä–∞–∑ –ø—Ä–ø. –°–µ—Ä–≥–∏—è —Å —á–∞—Å—Ç–∏—Ü–µ–π –º–æ—â–µ–π", "–ú–æ—â–∏ —Å–≤—è—Ç–æ–≥–æ", "–ò–∫–æ–Ω–∞ –ë–æ–∂–∏–µ–π –ú–∞—Ç–µ—Ä–∏", "–ß–∞—Å—Ç–∏—Ü–∞ –ñ–∏–≤–æ—Ç–≤–æ—Ä—è—â–µ–≥–æ –ö—Ä–µ—Å—Ç–∞"], correct: 0, expl: "–í —Ö—Ä–∞–º–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏–∫–æ–Ω–∞ –ø—Ä–µ–ø–æ–¥–æ–±–Ω–æ–≥–æ –°–µ—Ä–≥–∏—è —Å —á–∞—Å—Ç–∏—Ü–µ–π –µ–≥–æ —Å–≤—è—Ç—ã—Ö –º–æ—â–µ–π." }
            ];

            // –û—á–∏—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –∏–º—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å
            localStorage.removeItem('playerName');

            let state = {
                playerName: localStorage.getItem('playerName') || '',
                currentIndex: 0,
                answers: new Array(questions.length).fill(null),
                completed: false,
                showAnswers: false // —Ñ–ª–∞–≥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
            };

            const contentDiv = document.getElementById('content');

            function saveName(name) {
                state.playerName = name;
                localStorage.setItem('playerName', name);
            }

            function render() {
                if (!state.playerName) {
                    renderNameScreen();
                } else if (state.completed) {
                    renderResult();
                } else {
                    renderQuestion();
                }
            }

            function renderNameScreen() {
                let html = `
                    <div class="name-screen">
                        <h2>‚úô –ö–∞–∫ –∏–º—è —Ç–≤–æ—ë, —á–µ–ª–æ–≤–µ—á–µ? ‚úô</h2>
                        <input type="text" id="playerNameInput" placeholder="–ò–º—è / –∫–æ–º–∞–Ω–¥–∞" value="${state.playerName}">
                        <br>
                        <button class="btn-start" id="startBtn" disabled>–ù–∞—á–∞—Ç—å –∫–≤–∏–∑</button>
                    </div>
                `;
                contentDiv.innerHTML = html;

                const input = document.getElementById('playerNameInput');
                const btn = document.getElementById('startBtn');

                input.addEventListener('input', function() {
                    if (this.value.trim() !== '') {
                        btn.disabled = false;
                    } else {
                        btn.disabled = true;
                    }
                });

                btn.addEventListener('click', function() {
                    const name = input.value.trim();
                    if (name) {
                        saveName(name);
                        render();
                    }
                });

                // –ï—Å–ª–∏ –∏–º—è —É–∂–µ –±—ã–ª–æ –≤ localStorage (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, —Ç.–∫. –æ—á–∏—Å—Ç–∏–ª–∏), –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
                if (state.playerName) {
                    input.value = state.playerName;
                    btn.disabled = false;
                }
            }

            function renderQuestion() {
                const q = questions[state.currentIndex];
                const progressPercent = (state.currentIndex / questions.length) * 100;

                // –ü–æ–¥—Å—á—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö
                let correctCount = 0;
                let wrongCount = 0;
                state.answers.forEach((ans, idx) => {
                    if (ans !== null) {
                        if (ans === questions[idx].correct) correctCount++;
                        else wrongCount++;
                    }
                });

                // –ü—É—Ç—å –∫ –∫–∞—Ä—Ç–∏–Ω–∫–µ: q1.jpg, q2.jpg...
                const imgPath = `q${state.currentIndex+1}.jpg`;

                let html = `
                    <div class="stats">
                        <span> üïäÔ∏è ${correctCount}</span>
                        <span>‚ùå ${wrongCount}</span>
                    </div>
                    <div class="progress">
                        <span>–í–æ–ø—Ä–æ—Å ${state.currentIndex+1}/${questions.length}</span>
                        <div class="progress-bar"><div class="progress-fill" style="width: ${progressPercent}%;"></div></div>
                    </div>
                    <div class="question-box">
                        <div class="question-text">${q.q}</div>
                        <img src="${imgPath}" alt="–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è" class="question-image" onerror="this.onerror=null; this.classList.add('image-placeholder'); this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'100\' height=\'100\' viewBox=\'0 0 100 100\'><rect width=\'100\' height=\'100\' fill=\'%23d9c8a8\'/><text x=\'50\' y=\'55\' font-size=\'50\' text-anchor=\'middle\' fill=\'%237a572f\' font-family=\'Arial\'>&#10013;</text></svg>';">
                        <div class="answers" id="answersContainer">
                `;

                q.opts.forEach((opt, idx) => {
                    const checked = (state.answers[state.currentIndex] === idx) ? 'checked' : '';
                    html += `
                        <label class="answer-item ${state.answers[state.currentIndex] === idx ? 'selected' : ''}">
                            <input type="radio" name="question" value="${idx}" ${checked}>
                            ${opt}
                        </label>
                    `;
                });

                html += `
                        </div>
                    </div>
                    <button class="btn-next" id="nextBtn">${state.currentIndex === questions.length-1 ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å' : '–î–∞–ª–µ–µ'}</button>
                `;

                contentDiv.innerHTML = html;

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–∞–¥–∏–æ
                document.querySelectorAll('input[name="question"]').forEach(radio => {
                    radio.addEventListener('change', function(e) {
                        const val = parseInt(e.target.value);
                        state.answers[state.currentIndex] = val;
                        document.querySelectorAll('.answer-item').forEach(item => item.classList.remove('selected'));
                        e.target.closest('.answer-item').classList.add('selected');
                    });
                });

                // –ö–Ω–æ–ø–∫–∞ –¥–∞–ª–µ–µ/–∑–∞–≤–µ—Ä—à–∏—Ç—å
                document.getElementById('nextBtn').addEventListener('click', () => {
                    if (state.answers[state.currentIndex] === null) {
                        alert('–í—ã–±–µ—Ä–∏ –æ—Ç–≤–µ—Ç, —á–µ–ª–æ–≤–µ—á–µ!');
                        return;
                    }

                    if (state.currentIndex === questions.length - 1) {
                        state.completed = true;
                        render();
                    } else {
                        state.currentIndex++;
                        render();
                    }
                });
            }

            function renderResult() {
                let correct = 0, wrong = 0;
                state.answers.forEach((ans, idx) => {
                    if (ans === questions[idx].correct) correct++;
                    else wrong++;
                });

                const percent = Math.round((correct / questions.length) * 100);
                const blessing = correct === questions.length
                    ? "–ò—Å—Ç–∏–Ω–Ω—ã–π –∑–Ω–∞—Ç–æ–∫ –∂–∏—Ç–∏—è! –°–∞–º –ø—Ä–µ–ø–æ–¥–æ–±–Ω—ã–π –°–µ—Ä–≥–∏–π —Ä–∞–¥—É–µ—Ç—Å—è –æ —Ç–≤–æ–∏—Ö –ø–æ–∑–Ω–∞–Ω–∏—è—Ö."
                    : "¬´–í–Ω–∏–º–∞–π—Ç–µ —Å–µ–±–µ, –±—Ä–∞—Ç–∏–µ. –ü—Ä–µ–∂–¥–µ –∏–º–µ–π—Ç–µ —Å—Ç—Ä–∞—Ö –ë–æ–∂–∏–π, —á–∏—Å—Ç–æ—Ç—É –¥—É—à–µ–≤–Ω—É—é –∏ –ª—é–±–æ–≤—å –Ω–µ–ª–∏—Ü–µ–º–µ—Ä–Ω—É—é‚Ä¶ –ê –Ω–∏ –æ —á–µ–º –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–º –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è, –Ω–æ —Å–ª–µ–¥—É–µ—Ç —É–ø–æ–≤–∞—Ç—å –∏ –≤–∑–∏—Ä–∞—Ç—å –Ω–∞ –ë–æ–≥–∞¬ª. –°–∏–µ –∑–∞–≤–µ—â–∞–ª –Ω–∞–º –ø—Ä–µ–ø–æ–¥–æ–±–Ω—ã–π –°–µ—Ä–≥–∏–π. –ê —Ç–æ—Ç, –∫—Ç–æ —É—á–∏—Ç—Å—è –ø—Ä–∏–ª–µ–∂–Ω–æ, –æ–±—Ä–µ—Ç–∞–µ—Ç —Ä–∞–∑—É–º –∏ —Ä–∞–¥–æ—Å—Ç—å. –£ —Ç–µ–±—è –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è!";

                let html = `
                    <div class="result-box" id="resultBlock">
                        <div class="score">${correct} / ${questions.length}</div>
                        <p>–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: ${correct}  ‚Ä¢  –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: ${wrong}</p>
                        <p>${percent}% –≤–µ—Ä–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</p>
                        <p><strong>${state.playerName}</strong></p>
                        <div class="blessing">‚ò¶ ${blessing}</div>
                        <button class="screenshot-btn" id="screenshotBtn">üì∏ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç</button>
                        <button class="answers-btn" id="toggleAnswersBtn">${state.showAnswers ? '–°–∫—Ä—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã' : 'üìú –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã'}</button>
                        <button class="restart-btn" id="restartBtn">–ó–∞–Ω–æ–≤–æ</button>
                `;

                if (state.showAnswers) {
                    html += `<div class="answers-review">`;
                    questions.forEach((q, idx) => {
                        const imgPath = `q${idx+1}.jpg`;
                        const correctOption = q.opts[q.correct];
                        html += `
                            <div class="answer-card">
                                <img src="${imgPath}" alt="–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è" class="question-image" onerror="this.onerror=null; this.classList.add('image-placeholder'); this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'100\' height=\'100\' viewBox=\'0 0 100 100\'><rect width=\'100\' height=\'100\' fill=\'%23d9c8a8\'/><text x=\'50\' y=\'55\' font-size=\'50\' text-anchor=\'middle\' fill=\'%237a572f\' font-family=\'Arial\'>&#10013;</text></svg>';">
                                <div class="question-text">${idx+1}. ${q.q}</div>
                                <div class="options">
                                    <p><strong>–í–∞—Ä–∏–∞–Ω—Ç—ã:</strong> ${q.opts.join(' ‚Ä¢ ')}</p>
                                    <p class="correct-answer">‚úì –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctOption}</p>
                                </div>
                                <details>
                                    <summary>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç</summary>
                                    <div class="explanation">${q.expl}</div>
                                </details>
                            </div>
                        `;
                    });
                    html += `</div>`;
                }

                html += `</div>`; // –∑–∞–∫—Ä—ã–≤–∞–µ–º result-box
                contentDiv.innerHTML = html;

                document.getElementById('restartBtn').addEventListener('click', () => {
                    localStorage.removeItem('playerName');
                    state.currentIndex = 0;
                    state.answers = new Array(questions.length).fill(null);
                    state.completed = false;
                    state.showAnswers = false;
                    render();
                });

                document.getElementById('screenshotBtn').addEventListener('click', function() {
                    const element = document.getElementById('resultBlock');
                    html2canvas(element, { scale: 2, backgroundColor: '#f5e7cd' }).then(canvas => {
                        const link = document.createElement('a');
                        link.download = `Sergiy_quiz_${state.playerName}.png`;
                        link.href = canvas.toDataURL('image/png');
                        link.click();
                    }).catch(err => {
                        alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç, –Ω–æ —Ç—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é.');
                    });
                });

                document.getElementById('toggleAnswersBtn').addEventListener('click', () => {
                    state.showAnswers = !state.showAnswers;
                    renderResult(); // –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –Ω–æ–≤—ã–º —Ñ–ª–∞–≥–æ–º
                });
            }

            render();
        })();
    </script>
</body>
</html>
